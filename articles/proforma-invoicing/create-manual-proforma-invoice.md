---
title: Factures proforma
description: Aquest tema proporciona informació sobre les factures proforma a Project Operations.
author: rumant
manager: AnnBe
ms.date: 04/05/2021
ms.topic: article
ms.prod: ''
ms.service: project-operations
ms.reviewer: kfend
ms.author: rumant
ms.openlocfilehash: b143ba286f25ecb23fea09a85bca06543f7f55ff
ms.sourcegitcommit: ca0fc078d1a12484eca193fe051b8442c0559db8
ms.translationtype: HT
ms.contentlocale: ca-ES
ms.lasthandoff: 04/07/2021
ms.locfileid: "5866849"
---
# <a name="proforma-invoices"></a><span data-ttu-id="bfa57-103">Factures proforma</span><span class="sxs-lookup"><span data-stu-id="bfa57-103">Proforma invoices</span></span>

<span data-ttu-id="bfa57-104">_**S'aplica a:** Project Operations per a escenaris basats en recursos/sense cotització_</span><span class="sxs-lookup"><span data-stu-id="bfa57-104">_**Applies To:** Project Operations for resource/non-stocked based scenarios_</span></span>

<span data-ttu-id="bfa57-105">La facturació proforma és útil perquè proporciona als administradors de projectes un segon nivell d'aprovació abans de crear factures per a clients.</span><span class="sxs-lookup"><span data-stu-id="bfa57-105">Proforma invoicing gives project managers a second level of approval before they create invoices for customers.</span></span> <span data-ttu-id="bfa57-106">El primer nivell d'aprovació es completa quan s'aproven les entrades de temps, despeses i materials que envien els membres de l'equip del projecte.</span><span class="sxs-lookup"><span data-stu-id="bfa57-106">The first level of approval is completed when time, expense, and material entries that project team members submit are approved.</span></span> <span data-ttu-id="bfa57-107">Les factures proforma confirmades estan disponibles al mòdul Comptabilitat del projecte de Project Operations.</span><span class="sxs-lookup"><span data-stu-id="bfa57-107">Confirmed proforma invoices are available in the Project Accounting module of Project Operations.</span></span> <span data-ttu-id="bfa57-108">Els comptables del projecte poden fer actualitzacions addicionals, com ara els impostos de vendes, la comptabilitat i el disseny de la factura.</span><span class="sxs-lookup"><span data-stu-id="bfa57-108">Project accountants can perform additional updates such as sales tax, accounting, and invoice layout.</span></span>


## <a name="creating-project-invoices"></a><span data-ttu-id="bfa57-109">Crear factures de projecte</span><span class="sxs-lookup"><span data-stu-id="bfa57-109">Creating project invoices</span></span>

<span data-ttu-id="bfa57-110">Les factures de projecte es poden crear d'una en una o en massa.</span><span class="sxs-lookup"><span data-stu-id="bfa57-110">Project invoices can be created one at a time or in bulk.</span></span> <span data-ttu-id="bfa57-111">Podeu crear-les manualment o es poden configurar per tal que es generin en execucions automatitzades.</span><span class="sxs-lookup"><span data-stu-id="bfa57-111">You can create them manually, or they can be configured so that they are generated in automated runs.</span></span>

### <a name="manually-create-project-invoices"></a><span data-ttu-id="bfa57-112">Crear factures de projecte manualment</span><span class="sxs-lookup"><span data-stu-id="bfa57-112">Manually create project invoices</span></span> 

<span data-ttu-id="bfa57-113">Des de la pàgina de llista **Contractes del projecte**, podeu crear factures de projecte per separat per a cada contracte de projecte o podeu crear factures en massa per a diversos contractes de projecte.</span><span class="sxs-lookup"><span data-stu-id="bfa57-113">From the **Project Contracts** list page, you can create project invoices separately for each project contract, or you can create invoices in bulk for multiple project contracts.</span></span>

<span data-ttu-id="bfa57-114">Seguiu aquest pas per crear una factura per a un contracte de projecte específic.</span><span class="sxs-lookup"><span data-stu-id="bfa57-114">Follow this step to create an invoice for a specific project contract.</span></span>

- <span data-ttu-id="bfa57-115">A la pàgina de llista **Contractes del projecte**, obriu un contracte de projecte i, a continuació, seleccioneu **Crea una factura**.</span><span class="sxs-lookup"><span data-stu-id="bfa57-115">On the **Project Contracts** list page, open a project contract, and then select **Create Invoice**.</span></span>

    <span data-ttu-id="bfa57-116">Es genera una factura per a totes les transaccions del contracte de projecte seleccionat que tinguin un estat **Llest per facturar**.</span><span class="sxs-lookup"><span data-stu-id="bfa57-116">An invoice is generated for all transactions for the selected project contract that have a status of **Ready to Invoice**.</span></span> <span data-ttu-id="bfa57-117">Aquestes transaccions inclouen temps, despeses, materials, fites i altres línies de llibre diari de vendes no facturades.</span><span class="sxs-lookup"><span data-stu-id="bfa57-117">These transactions include time, expenses, materials, milestones, and other unbilled sales journal lines.</span></span>

<span data-ttu-id="bfa57-118">Seguiu aquests passos per crear factures de manera massiva.</span><span class="sxs-lookup"><span data-stu-id="bfa57-118">Follow these steps to create invoices in bulk.</span></span>

1. <span data-ttu-id="bfa57-119">A la pàgina de llista **Contractes del projecte**, seleccioneu un o diversos contractes de projecte per als quals heu de crear una factura i, a continuació, seleccioneu **Crea les factures del projecte**.</span><span class="sxs-lookup"><span data-stu-id="bfa57-119">On the **Project Contracts** list page, select one or more project contracts that you must create an invoice for, and then select **Create Project Invoices**.</span></span>

    <span data-ttu-id="bfa57-120">Un missatge d'advertiment us informa que pot haver-hi un retard abans que es creïn les factures.</span><span class="sxs-lookup"><span data-stu-id="bfa57-120">A warning message informs you that there might be a delay before invoices are created.</span></span> <span data-ttu-id="bfa57-121">El procés també es mostra.</span><span class="sxs-lookup"><span data-stu-id="bfa57-121">The process is also shown.</span></span>

2. <span data-ttu-id="bfa57-122">Seleccioneu **D'acord** per tancar el quadre de missatge.</span><span class="sxs-lookup"><span data-stu-id="bfa57-122">Select **OK** to close the message box.</span></span>

    <span data-ttu-id="bfa57-123">Es genera una factura per a totes les transaccions en una línia de contracte que tinguin un estat **Llest per facturar**.</span><span class="sxs-lookup"><span data-stu-id="bfa57-123">An invoice is generated for all transactions on a contract line that have a status of **Ready to Invoice**.</span></span> <span data-ttu-id="bfa57-124">Aquestes transaccions inclouen temps, despeses, materials, fites i altres línies de llibre diari de vendes no facturades.</span><span class="sxs-lookup"><span data-stu-id="bfa57-124">These transactions include time, expenses, materials, milestones, and other unbilled sales journal lines.</span></span>

3. <span data-ttu-id="bfa57-125">Per visualitzar les factures generades, aneu a **Vendes** \> **Facturació** \> **Factures**.</span><span class="sxs-lookup"><span data-stu-id="bfa57-125">To view the invoices that are generated, go to **Sales** \> **Billing** \> **Invoices**.</span></span> <span data-ttu-id="bfa57-126">Veureu una factura per a cadascun dels contractes del projecte.</span><span class="sxs-lookup"><span data-stu-id="bfa57-126">You will see one invoice for each project contract.</span></span>

### <a name="set-up-automated-creation-of-project-invoices"></a><span data-ttu-id="bfa57-127">Configurar la creació automatitzada de factures de projecte</span><span class="sxs-lookup"><span data-stu-id="bfa57-127">Set up automated creation of project invoices</span></span> 

<span data-ttu-id="bfa57-128">Seguiu aquests passos per configurar una execució de factura automàtica.</span><span class="sxs-lookup"><span data-stu-id="bfa57-128">Follow these steps to configure an automated invoice run.</span></span>

1. <span data-ttu-id="bfa57-129">Aneu a **Configuració** \> **Treballs per lots**.</span><span class="sxs-lookup"><span data-stu-id="bfa57-129">Go to **Settings** \> **Batch jobs**.</span></span>
2. <span data-ttu-id="bfa57-130">Creeu un treball per lots i anomeneu-lo **Creació de factures del Project Operations**.</span><span class="sxs-lookup"><span data-stu-id="bfa57-130">Create a batch job, and name it **Project Operations Create Invoices**.</span></span> <span data-ttu-id="bfa57-131">El nom del treball per lots ha d'incloure el terme "Crea factures".</span><span class="sxs-lookup"><span data-stu-id="bfa57-131">The name of the batch job must include the term "Create Invoices."</span></span>
3. <span data-ttu-id="bfa57-132">Al camp **Tipus de treball**, seleccioneu **Cap**.</span><span class="sxs-lookup"><span data-stu-id="bfa57-132">In the **Job type** field, select **None**.</span></span> <span data-ttu-id="bfa57-133">Per defecte, les opcions **Freqüència diària** i **Actiu** estan definides com a **Sí**.</span><span class="sxs-lookup"><span data-stu-id="bfa57-133">By default, the **Frequency Daily** and **Is Active** options are set to **Yes**.</span></span>
4. <span data-ttu-id="bfa57-134">Seleccioneu **Executa el flux de treball**.</span><span class="sxs-lookup"><span data-stu-id="bfa57-134">Select **Run Workflow**.</span></span> <span data-ttu-id="bfa57-135">Al quadre de diàleg **Registre de cerca**, veureu tres fluxos de treball:</span><span class="sxs-lookup"><span data-stu-id="bfa57-135">In the **Look Up Record** dialog box, you will see three workflows:</span></span>

    - <span data-ttu-id="bfa57-136">ProcessRunCaller</span><span class="sxs-lookup"><span data-stu-id="bfa57-136">ProcessRunCaller</span></span>
    - <span data-ttu-id="bfa57-137">ProcessRunner</span><span class="sxs-lookup"><span data-stu-id="bfa57-137">ProcessRunner</span></span>
    - <span data-ttu-id="bfa57-138">UpdateRoleUtilization</span><span class="sxs-lookup"><span data-stu-id="bfa57-138">UpdateRoleUtilization</span></span>

5. <span data-ttu-id="bfa57-139">Seleccioneu **ProcessRunCaller** i després trieu **Afegeix**.</span><span class="sxs-lookup"><span data-stu-id="bfa57-139">Select **ProcessRunCaller**, and then select **Add**.</span></span>
6. <span data-ttu-id="bfa57-140">Al quadre de diàleg següent, seleccioneu **D'acord**.</span><span class="sxs-lookup"><span data-stu-id="bfa57-140">In the next dialog box, select **OK**.</span></span> <span data-ttu-id="bfa57-141">Un flux de treball **Repòs** va seguit d'un flux de treball **Procés**.</span><span class="sxs-lookup"><span data-stu-id="bfa57-141">A **Sleep** workflow is followed by a **Process** workflow.</span></span>

    <span data-ttu-id="bfa57-142">També podeu seleccionar **ProcessRunner** al pas 5.</span><span class="sxs-lookup"><span data-stu-id="bfa57-142">You can also select **ProcessRunner** in step 5.</span></span> <span data-ttu-id="bfa57-143">Després, quan seleccioneu **D'acord**, un flux de treball **Procés** va seguit d'un flux de treball **Repòs**.</span><span class="sxs-lookup"><span data-stu-id="bfa57-143">Then, when you select **OK**, a **Process** workflow is followed by a **Sleep** workflow.</span></span>

<span data-ttu-id="bfa57-144">Els fluxos de treball **ProcessRunCaller** i **ProcessRunner** creen factures.</span><span class="sxs-lookup"><span data-stu-id="bfa57-144">The **ProcessRunCaller** and **ProcessRunner** workflows create invoices.</span></span> <span data-ttu-id="bfa57-145">**ProcessRunCaller** crida a **ProcessRunner**.</span><span class="sxs-lookup"><span data-stu-id="bfa57-145">**ProcessRunCaller** calls **ProcessRunner**.</span></span> <span data-ttu-id="bfa57-146">**ProcessRunner** és el flux de treball que en realitat crea les factures.</span><span class="sxs-lookup"><span data-stu-id="bfa57-146">**ProcessRunner** is the workflow that actually creates the invoices.</span></span> <span data-ttu-id="bfa57-147">Passa per totes les línies de contracte per a les quals s'han de crear factures i crea factures d'aquestes línies.</span><span class="sxs-lookup"><span data-stu-id="bfa57-147">It goes through all the contract lines that invoices must be created for, and it creates invoices for those lines.</span></span> <span data-ttu-id="bfa57-148">Per determinar les línies de contracte per a les quals s'han de crear factures, el treball consulta les dates d'execució de la factura per a les línies de contracte.</span><span class="sxs-lookup"><span data-stu-id="bfa57-148">To determine the contract lines that invoices must be created for, the job looks at invoice run dates for the contract lines.</span></span> <span data-ttu-id="bfa57-149">Si les línies de contracte que pertanyen a un contracte tenen la mateixa data d'execució de la factura, les transaccions es combinen en una factura que té dues línies de factura.</span><span class="sxs-lookup"><span data-stu-id="bfa57-149">If contract lines that belong to one contract have the same invoice run date, the transactions are combined into one invoice that has two invoice lines.</span></span> <span data-ttu-id="bfa57-150">Si no hi ha cap transacció per a la qual crear factures, el treball omet la creació de la factura.</span><span class="sxs-lookup"><span data-stu-id="bfa57-150">If there are no transactions to create invoices for, the job skips invoice creation.</span></span>

<span data-ttu-id="bfa57-151">Després d'haver acabat d'executar-se **ProcessRunner**, crida a **ProcessRunCaller**, proporciona l'hora d'acabament i es tanca.</span><span class="sxs-lookup"><span data-stu-id="bfa57-151">After **ProcessRunner** has finished running, it calls **ProcessRunCaller**, provides the end time, and is closed.</span></span> <span data-ttu-id="bfa57-152">**ProcessRunCaller** llavors inicia un temporitzador que s'executa durant 24 hores a partir de l'hora d'acabament especificada.</span><span class="sxs-lookup"><span data-stu-id="bfa57-152">**ProcessRunCaller** then starts a timer that runs for 24 hours from the specified end time.</span></span> <span data-ttu-id="bfa57-153">Al final del temporitzador, **ProcessRunCaller** es tanca.</span><span class="sxs-lookup"><span data-stu-id="bfa57-153">At the end of the timer, **ProcessRunCaller** is closed.</span></span>

<span data-ttu-id="bfa57-154">El treball de processament per lots per crear factures és una feina recurrent.</span><span class="sxs-lookup"><span data-stu-id="bfa57-154">The batch process job for creating invoices is a recurrent job.</span></span> <span data-ttu-id="bfa57-155">Si aquest procés per lots s'executa moltes vegades, es creen diverses instàncies del treball que causen errors.</span><span class="sxs-lookup"><span data-stu-id="bfa57-155">If this batch process is run many times, multiple instances of the job are created and cause errors.</span></span> <span data-ttu-id="bfa57-156">Per tant, hauríeu d'iniciar el procés de processament per lots només una vegada i reiniciar-lo només si s'atura l'execució.</span><span class="sxs-lookup"><span data-stu-id="bfa57-156">Therefore, you should start the batch process only one time, and you should restart it only if it stops running.</span></span>

> [!NOTE]
> <span data-ttu-id="bfa57-157">La facturació per lots només s'executa per a les línies de contracte del projecte que es configuren mitjançant planificacions de factura.</span><span class="sxs-lookup"><span data-stu-id="bfa57-157">Batch invoicing only runs for project contract lines that are configured by invoice schedules.</span></span> <span data-ttu-id="bfa57-158">Una línia de contracte amb un mètode de facturació de preu fix ha de tenir les fites configurades.</span><span class="sxs-lookup"><span data-stu-id="bfa57-158">A contract line with a fixed price billing method must have milestones configured.</span></span> <span data-ttu-id="bfa57-159">Una línia de contracte de projecte amb un mètode de facturació de temps i material necessitarà una configuració de planificació de facturació basada en la data.</span><span class="sxs-lookup"><span data-stu-id="bfa57-159">A project contract line with a time and material billing method will need a date-based invoice schedule set up.</span></span> <span data-ttu-id="bfa57-160">El mateix s'aplica a una línia de contracte basada en projectes.</span><span class="sxs-lookup"><span data-stu-id="bfa57-160">The same applies to a project-based contract line.</span></span>      
 
### <a name="edit-a-draft-invoice"></a><span data-ttu-id="bfa57-161">Editar un esborrany de factura</span><span class="sxs-lookup"><span data-stu-id="bfa57-161">Edit a draft invoice</span></span>

<span data-ttu-id="bfa57-162">Quan creeu un esborrany de factura, totes les transaccions de vendes no facturades que es van crear quan es van aprovar les entrades de temps, despesa i ús de materials s'afegeixen a la factura.</span><span class="sxs-lookup"><span data-stu-id="bfa57-162">When you create a draft project invoice, all unbilled sales transactions that were created when the time, expense, and material usage entries were approved are pulled onto the invoice.</span></span> <span data-ttu-id="bfa57-163">Podeu fer els ajustaments següents mentre la factura es manté en una fase d'esborrany:</span><span class="sxs-lookup"><span data-stu-id="bfa57-163">You can make the following adjustments while the invoice is still in a draft stage:</span></span>

- <span data-ttu-id="bfa57-164">Suprimir o editar els detalls de la línia de factura.</span><span class="sxs-lookup"><span data-stu-id="bfa57-164">Delete or edit invoice line details.</span></span>
- <span data-ttu-id="bfa57-165">Editar i ajustar la quantitat i el tipus de facturació.</span><span class="sxs-lookup"><span data-stu-id="bfa57-165">Edit and adjust the quantity and billing type.</span></span>

<span data-ttu-id="bfa57-166">Seleccioneu **Confirma** per confirmar una factura.</span><span class="sxs-lookup"><span data-stu-id="bfa57-166">Select **Confirm** to confirm an invoice.</span></span> <span data-ttu-id="bfa57-167">L'acció de confirmació és una acció d'un sol sentit.</span><span class="sxs-lookup"><span data-stu-id="bfa57-167">The Confirm action is a one-way action.</span></span> <span data-ttu-id="bfa57-168">Quan seleccioneu **Confirma**, el sistema fa que la factura sigui només de lectura i creï valors reals de vendes facturades des de cada detall de línia de factura per a cada línia de factura.</span><span class="sxs-lookup"><span data-stu-id="bfa57-168">When you select **Confirm**, the system makes the invoice read-only and creates billed sales actuals from each invoice line detail for each invoice line.</span></span> <span data-ttu-id="bfa57-169">Si el detall de la línia de factura fa referència a un valor real de vendes no facturades, el sistema també reinverteix el valor real de vendes no facturades.</span><span class="sxs-lookup"><span data-stu-id="bfa57-169">If the invoice line detail references an unbilled sales actual, the system also reverses the unbilled sales actual.</span></span> <span data-ttu-id="bfa57-170">(Qualsevol detall de línia de factura que s'hagi creat des d'una entrada de compte o de despesa farà referència a un valor real de vendes sense facturar.) Els sistemes d'integració general de llibres poden utilitzar aquest canvi per revertir el treball en curs del projecte amb finalitats comptables.</span><span class="sxs-lookup"><span data-stu-id="bfa57-170">(Any invoice line detail that was created from a time or expense entry will reference an unbilled sales actual.) General ledger integration systems can use this reversal to reverse project work in progress (WIP) for accounting purposes.</span></span>

### <a name="correct-a-confirmed-invoice"></a><span data-ttu-id="bfa57-171">Correcció d'una factura confirmada</span><span class="sxs-lookup"><span data-stu-id="bfa57-171">Correct a confirmed invoice</span></span>

<span data-ttu-id="bfa57-172">Es poden editar (corregir) les factures confirmades.</span><span class="sxs-lookup"><span data-stu-id="bfa57-172">Confirmed invoices can be edited (corrected).</span></span> <span data-ttu-id="bfa57-173">Quan corregiu una factura confirmada, es crea un nou esborrany de factura correctiva.</span><span class="sxs-lookup"><span data-stu-id="bfa57-173">When you correct a confirmed invoice, a new draft corrective invoice is created.</span></span> <span data-ttu-id="bfa57-174">Com que s'assumeix que voleu revertir totes les transaccions i quantitats de la factura original, aquesta factura correctiva inclou totes les transaccions de la factura original i totes les quantitats que hi ha són 0 (zero).</span><span class="sxs-lookup"><span data-stu-id="bfa57-174">Because the assumption is that you want to reverse all the transactions and quantities from the original invoice, this corrective invoice includes all the transactions from the original invoice, and all the quantities on it are 0 (zero).</span></span>

<span data-ttu-id="bfa57-175">Si alguna transacció no requereix correcció, podeu eliminar-la de l'esborrany de factura correctiva.</span><span class="sxs-lookup"><span data-stu-id="bfa57-175">If any transactions don't require correction, you can remove them from the draft corrective invoice.</span></span> <span data-ttu-id="bfa57-176">Si voleu revertir o retornar només una quantitat parcial, podeu editar el camp **Quantitat** al detall de la línia.</span><span class="sxs-lookup"><span data-stu-id="bfa57-176">If you want to reverse or return only a partial quantity, you can edit the **Quantity** field on the line detail.</span></span> <span data-ttu-id="bfa57-177">Si obriu el detall de la línia de factura, podeu veure la quantitat original de la factura.</span><span class="sxs-lookup"><span data-stu-id="bfa57-177">If you open the invoice line detail, you can see the original invoice quantity.</span></span> <span data-ttu-id="bfa57-178">A continuació, podeu editar la quantitat de la factura actual de manera que sigui inferior o superior a la quantitat original de la factura.</span><span class="sxs-lookup"><span data-stu-id="bfa57-178">You can then edit the current invoice quantity so that it's less than or more than the original invoice quantity.</span></span>

<span data-ttu-id="bfa57-179">Quan es confirma una factura correctiva, es reverteix el valor real de vendes facturades original i es crea un nou valor real de vendes facturades.</span><span class="sxs-lookup"><span data-stu-id="bfa57-179">When you confirm a corrective invoice, the original billed sales actual is reversed, and a new billed sales actual is created.</span></span> <span data-ttu-id="bfa57-180">Si la quantitat s'ha reduït, la diferència provocarà que també s'hagi creat un nou valor real de venda no facturada.</span><span class="sxs-lookup"><span data-stu-id="bfa57-180">If the quantity was reduced, the difference will cause a new unbilled sales actual to be created too.</span></span> <span data-ttu-id="bfa57-181">Per exemple, si les vendes facturades originals eren de vuit hores, i el detall de la línia de factura correctiva té una quantitat menor de sis hores, es reverteix la línia de vendes facturades originals i es creen dos nous valors reals:</span><span class="sxs-lookup"><span data-stu-id="bfa57-181">For example, if the original billed sale was for eight hours, and the corrective invoice line detail has a reduced quantity of six hours, the original billed sales line is reversed and two new actuals are created:</span></span>

- <span data-ttu-id="bfa57-182">Un valor de vendes facturades durant sis hores.</span><span class="sxs-lookup"><span data-stu-id="bfa57-182">A billed sales actual for six hours.</span></span>
- <span data-ttu-id="bfa57-183">Un valor de vendes no facturades per a les dues hores restants.</span><span class="sxs-lookup"><span data-stu-id="bfa57-183">An unbilled sales actual for the remaining two hours.</span></span> <span data-ttu-id="bfa57-184">Aquesta transacció es pot facturar més tard o marcar com a no imputable, en funció de les negociacions amb el client.</span><span class="sxs-lookup"><span data-stu-id="bfa57-184">This transaction can either be billed later or marked as non-chargeable, depending on the negotiations with the customer.</span></span>


[!INCLUDE[footer-include](../includes/footer-banner.md)]
