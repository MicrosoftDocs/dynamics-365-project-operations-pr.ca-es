---
title: Personalitzar l'entrada de temps setmanal
description: En aquest tema es proporciona informació sobre com implementar regles de negoci personalitzades que segueixin les pràctiques d'una organització.
author: stsporen
ms.custom:
- dyn365-projectservice
ms.date: 07/09/2019
ms.topic: article
ms.author: rumant
audience: Admin
search.audienceType:
- admin
- customizer
- enduser
search.app:
- D365CE
- D365PS
- ProjectOperations
ms.openlocfilehash: c117e06e7a5c57c7f9b70d1380f450c0ea97cd12
ms.sourcegitcommit: 40f68387f594180af64a5e5c748b6efa188bd300
ms.translationtype: HT
ms.contentlocale: ca-ES
ms.lasthandoff: 05/10/2021
ms.locfileid: "6013024"
---
# <a name="customize-weekly-time-entry"></a><span data-ttu-id="0b4b7-103">Personalització de l'entrada de temps setmanal</span><span class="sxs-lookup"><span data-stu-id="0b4b7-103">Customize weekly time entry</span></span> 

[!include [banner](../includes/psa-now-project-operations.md)]

[!INCLUDE[cc-applies-to-psa-app-3.x](../includes/cc-applies-to-psa-app-3x.md)]

<span data-ttu-id="0b4b7-104">A la versió 3.3 del Microsoft Dynamics 365 Project Service Automation, Microsoft ha presentat una moderna quadrícula que permet que els recursos de projecte introdueixin ràpidament les hores de fins a tota una setmana.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-104">In Microsoft Dynamics 365 Project Service Automation version 3.3, Microsoft introduced a modern grid that lets project resources quickly enter time for up to one week at a time.</span></span> <span data-ttu-id="0b4b7-105">La nova quadrícula d'entrada de temps setmanal pot mostrar els totals per a les entrades per data, per fila o per setmana.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-105">The new weekly time entry grid can show totals for entries by date, by row, or by week.</span></span> <span data-ttu-id="0b4b7-106">Els recursos poden fer còpies d'entrades de temps dins de la setmana i també copiar de manera massiva des de setmanes anteriors.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-106">Resources can make copies of time entries within the week and also bulk-copy from previous weeks.</span></span> <span data-ttu-id="0b4b7-107">Els personalitzadors del sistema poden personalitzar la visualització afegint-hi camps, afegint cerques a altres entitats i implementant regles de negoci personalitzades per segueixin les pràctiques de l'organització.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-107">System customizers can customize the view by adding fields, adding lookups to other entities, and implementing custom business rules to support their organization's practices.</span></span>

<span data-ttu-id="0b4b7-108">A l'entrada de temps i la nova quadrícula de temps setmanal s'hi accedeix a través del mapa del lloc.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-108">Time entry and the new weekly time grid are accessed through the site map.</span></span> <span data-ttu-id="0b4b7-109">L'experiència d'entrada de temps personalitzada no extensible que formava part de versions del PSA anteriors ha estat substituïda per la quadrícula d'entrada de temps setmanal extensible i també per una experiència alternativa a la quadrícula i el calendari només de lectura.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-109">The non-extensible custom time entry experience that was part of earlier PSA versions has been replaced by the extensible weekly time entry grid, and also by an alternative experience in the read-only grid and calendar.</span></span> <span data-ttu-id="0b4b7-110">A causa d'aquest canvi, els usuaris poden introduir l'hora en quantitats setmanals.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-110">Because of this change, users can enter time in weekly amounts.</span></span>

## <a name="page-layout"></a><span data-ttu-id="0b4b7-111">Disposició de pàgina</span><span class="sxs-lookup"><span data-stu-id="0b4b7-111">Page layout</span></span>
<span data-ttu-id="0b4b7-112">La nova quadrícula d'entrada de temps setmanal és un control personalitzat que té una barra d'eines i dues seccions principals, **Dimensions** i **Duració**.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-112">The new weekly time entry grid is a custom control that has a toolbar and two main sections, **Dimensions** and **Duration**.</span></span> <span data-ttu-id="0b4b7-113">La barra d'eines inclou un botó que només s'aplica a aquest control personalitzat per a la quadrícula d'entrada de temps.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-113">The toolbar includes a button that applies only to this custom control for the time entry grid.</span></span> <span data-ttu-id="0b4b7-114">Per contra, els botons de la subfinestra Acció de la part superior de la pàgina s'apliquen als tres tipus de controls que estan admesos a l'entrada de temps: el control d'entrada de temps setmanal, el control només de lectura i el control de calendari.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-114">By contrast, the buttons on the Action Pane at the top of the page apply to the three types of controls that are supported for time entry: the weekly time entry control, the read-only control, and the calendar control.</span></span>

### <a name="dimensions"></a><span data-ttu-id="0b4b7-115">Dimensions</span><span class="sxs-lookup"><span data-stu-id="0b4b7-115">Dimensions</span></span>
<span data-ttu-id="0b4b7-116">A la secció **Dimensions** es mostren, com a capçaleres de columna, totes les dimensions en què es pot introduir el temps.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-116">The **Dimensions** section shows, as column headings, all the dimensions that time can be entered against.</span></span> <span data-ttu-id="0b4b7-117">Les dimensions següents s'admeten de fàbrica:</span><span class="sxs-lookup"><span data-stu-id="0b4b7-117">The following dimensions are supported out of the box:</span></span>

- <span data-ttu-id="0b4b7-118">Projecte</span><span class="sxs-lookup"><span data-stu-id="0b4b7-118">Project</span></span>
- <span data-ttu-id="0b4b7-119">Tasca del projecte</span><span class="sxs-lookup"><span data-stu-id="0b4b7-119">Project Task</span></span>
- <span data-ttu-id="0b4b7-120">Funció</span><span class="sxs-lookup"><span data-stu-id="0b4b7-120">Role</span></span>
- <span data-ttu-id="0b4b7-121">Tipus</span><span class="sxs-lookup"><span data-stu-id="0b4b7-121">Type</span></span>
- <span data-ttu-id="0b4b7-122">Estat de l'entrada</span><span class="sxs-lookup"><span data-stu-id="0b4b7-122">Entry Status</span></span>

<span data-ttu-id="0b4b7-123">La secció **Dimensions** no permet l'edició en línia.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-123">The **Dimensions** section doesn't allow for inline editing.</span></span> <span data-ttu-id="0b4b7-124">Aquesta secció està basada en una visualització que permet afegir camps personalitzats a la quadrícula d'entrada de temps setmanal.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-124">This section is backed by a view that enables custom fields to be added to the weekly time entry grid.</span></span> <span data-ttu-id="0b4b7-125">Per obtenir informació sobre com afegir camps personalitzats, vegeu la secció "Extensibilitat" més endavant en aquest tema.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-125">For information about how to add custom fields, see the "Extensibility" section later in this topic.</span></span>

### <a name="duration"></a><span data-ttu-id="0b4b7-126">Duració</span><span class="sxs-lookup"><span data-stu-id="0b4b7-126">Duration</span></span>
<span data-ttu-id="0b4b7-127">La secció Duració mostra els dies de la setmana com a capçaleres de columna.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-127">The Duration section shows the days of the week as column headers.</span></span> <span data-ttu-id="0b4b7-128">Aquesta secció permet l'edició en línia.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-128">This section allows for inline editing.</span></span> <span data-ttu-id="0b4b7-129">Després de crear una fila d'entrada de temps que té les dimensions adequades, els usuaris poden introduir ràpidament, en línia, la quantitat de temps que han invertit en aquestes dimensions.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-129">After a time entry row is created that has appropriate dimensions, users can quickly enter, inline, the amount of time that they spent on those dimensions.</span></span>

## <a name="create-a-new-time-entry"></a><span data-ttu-id="0b4b7-130">Crea una entrada de temps nova</span><span class="sxs-lookup"><span data-stu-id="0b4b7-130">Create a new time entry</span></span>
<span data-ttu-id="0b4b7-131">Per crear una entrada de temps nova a la quadrícula d'entrada de temps, seleccioneu **Crea**.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-131">To create a new time entry in the time entry grid, select **New**.</span></span> <span data-ttu-id="0b4b7-132">Apareixerà el quadre de diàleg **Creació ràpida d'entrada de temps**.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-132">The **Time Entry Quick Create** dialog box appears.</span></span> <span data-ttu-id="0b4b7-133">En aquest quadre de diàleg, els usuaris poden seleccionar la data d'entrada de temps i, a continuació, introduir les dades per a les dimensions **Projecte**, **Tasca de projecte**, **Funció** i **Duració** en minuts, hores o dies escrivint **h**, **m** o **d**, juntament amb el número.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-133">In this dialog box, users can select the time entry date, and then enter data for the **Project**, **Project Task**, **Role**, and **Duration** dimensions in minutes, hours, or days by typing **h**, **m**, or **d**, together with the number.</span></span> <span data-ttu-id="0b4b7-134">Els usuaris també poden introduir una descripció i els comentaris que es poden compartir externament per a l'entrada de temps.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-134">Users can also enter a description and comments that can be shared externally for the time entry.</span></span> <span data-ttu-id="0b4b7-135">Quan els usuaris desin els canvis, els valors que s'han introduït a les dimensions es mostren a la secció **Dimensions**.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-135">When users save their changes, the values that they entered against the dimensions appear in the **Dimensions** section.</span></span> <span data-ttu-id="0b4b7-136">La informació de duració que s'hagi introduït al camp **Duració** apareix a la data en la qual s'ha creat l'entrada de temps.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-136">Duration information that they entered in the **Duration** field appears on the date that the time entry was created for.</span></span>

<span data-ttu-id="0b4b7-137">Els camps de cerca es basen en visualitzacions del sistema.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-137">Lookup fields are backed by system views.</span></span> <span data-ttu-id="0b4b7-138">Per exemple, després que un usuari entri en un projecte , el camp **Tasca de projecte** està definit a la visualització **Còpia** per defecte.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-138">For example, after a user enters a project, the **Project Task** field is set to the **Copy** view by default.</span></span> <span data-ttu-id="0b4b7-139">Per crear entrades de temps per a les tasques que no s'assignen a l'usuari, seleccioneu **Canvia la visualització** al quadre de diàleg de cerca i seleccioneu la visualització **Totes les tasques de projecte actives**.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-139">To create time entries for tasks that aren't assigned to a user, select **Change View** in the lookup dialog box, and then select the **All Active Project Tasks** view.</span></span>

## <a name="edit-a-time-entry"></a><span data-ttu-id="0b4b7-140">Editar una entrada de temps</span><span class="sxs-lookup"><span data-stu-id="0b4b7-140">Edit a time entry</span></span>
<span data-ttu-id="0b4b7-141">Els detalls d'alguns camps de la pàgina d'entrada de temps, com ara **Descripció** i **Comentaris externs**, no es mostren a la quadrícula d'entrada de temps setmanal.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-141">Details from some fields on the time entry page, such as **Description** and **External Comments**, aren't shown in the weekly time entry grid.</span></span> <span data-ttu-id="0b4b7-142">En lloc d'això, un petit indicador triangular apareix a les cel·les de duració que tenen aquests detalls addicionals.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-142">Instead, a small triangular indicator appears in duration cells that have these additional details.</span></span> <span data-ttu-id="0b4b7-143">Seleccioneu la cel·la i, a continuació, seleccioneu **Edita els detalls** per visualitzar les dades de la subfinestra **Edició ràpida**.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-143">Select the cell, and then select **Edit Details** to view the data in the **Quick Edit** pane.</span></span> <span data-ttu-id="0b4b7-144">Per editar o actualitzar els detalls d'una entrada de temps específica que no és part de la quadrícula d'entrada de temps setmanal, els usuaris han d'obrir la subfinestra **Edició ràpida**.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-144">To edit or update the details for a specific time entry that isn't part of the weekly time entry grid, users must open the **Quick Edit** pane.</span></span>

## <a name="copy-a-time-entry-row"></a><span data-ttu-id="0b4b7-145">Copiar una fila d'entrada de temps</span><span class="sxs-lookup"><span data-stu-id="0b4b7-145">Copy a time entry row</span></span>
<span data-ttu-id="0b4b7-146">Després de crear la primera fila d'entrada de temps, els usuaris poden seleccionar **Copia la fila** per copiar la fila sencera en una fila nova.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-146">After the first time entry row has been created, users can select **Copy Row** to copy the whole row to a new row.</span></span> <span data-ttu-id="0b4b7-147">Quan una fila es copia d'aquesta manera, les dimensions i duracions també es copien.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-147">When a row is copied in this way, dimensions and durations are also copied.</span></span> <span data-ttu-id="0b4b7-148">Els usuaris també poden seleccionar **Edita la fila** per actualitzar els valors de les dimensions i les duracions en línia a la secció **Duració**.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-148">Users can also select **Edit Row** to update dimension values and durations inline in the **Duration** section.</span></span>

## <a name="open-a-time-entry"></a><span data-ttu-id="0b4b7-149">Obrir una entrada de temps</span><span class="sxs-lookup"><span data-stu-id="0b4b7-149">Open a time entry</span></span>
<span data-ttu-id="0b4b7-150">Per admetre l'entrada òptima i ràpida en els camps més importants, la quadrícula d'entrada de temps setmanal mostra un subconjunt de dimensions i temps de duració seleccionats.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-150">To support optimal and quick entry in the most prominent fields, the weekly time entry grid show a subset of selected dimensions and time durations.</span></span> <span data-ttu-id="0b4b7-151">Per visualitzar tots els detalls d'una sola vegada a l'entrada de temps, a **Edita l'entrada**, seleccioneu **Obre**.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-151">To view all the details of a single time entry, under **Edit Entry**, select **Open**.</span></span>

## <a name="submit-a-time-entry"></a><span data-ttu-id="0b4b7-152">Enviar una entrada de temps</span><span class="sxs-lookup"><span data-stu-id="0b4b7-152">Submit a time entry</span></span>
<span data-ttu-id="0b4b7-153">Els usuaris poden enviar una única entrada de temps o un grup d'entrades de temps seleccionant un bloc de cel·les o una fila d'entrada de temps sencera i, a continuació, seleccionant **Envia**.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-153">Users can submit a single time entry or a group of time entries by selecting a block of cells or a whole time entry row, and then selecting **Submit**.</span></span> <span data-ttu-id="0b4b7-154">Les entrades de temps enviades apareixen com a entrades pendents d'aprovació a la pàgina **Aprovació** dels aprovadors.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-154">Submitted time entries appear as entries that are pending approval on the approvers' **Approval** page.</span></span> <span data-ttu-id="0b4b7-155">Després d'haver enviat correctament les entrades de temps, no es poden editar.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-155">After time entries are successfully submitted, they can't be edited.</span></span>

## <a name="recall-a-time-entry"></a><span data-ttu-id="0b4b7-156">Recuperar una entrada de temps</span><span class="sxs-lookup"><span data-stu-id="0b4b7-156">Recall a time entry</span></span>
<span data-ttu-id="0b4b7-157">Podeu recuperar entrades de temps que heu enviat.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-157">You can recall time entries that you've submitted.</span></span> <span data-ttu-id="0b4b7-158">Podeu recuperar una entrada d'una sola vegada, un bloc d'entrades de temps o tota una fila d'entrades de temps.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-158">You can recall a single time entry, a block of time entries, or a whole row of time entries.</span></span> <span data-ttu-id="0b4b7-159">Les entrades de temps recuperades estan disponibles per als recursos per editar-les.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-159">Recalled time entries are available to resources for editing.</span></span>

## <a name="time-entry-status"></a><span data-ttu-id="0b4b7-160">Estat de l'entrada de temps</span><span class="sxs-lookup"><span data-stu-id="0b4b7-160">Time entry status</span></span>
<span data-ttu-id="0b4b7-161">Les entrades de temps noves s'assignen automàticament a un estat **Esborrany**.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-161">New time entries are automatically assigned a status of **Draft**.</span></span> <span data-ttu-id="0b4b7-162">Quan s'envia una entrada de temps, l'estat s'actualitzarà a **Enviada**.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-162">When a time entry is submitted, the status is updated to **Submitted**.</span></span> <span data-ttu-id="0b4b7-163">Quan s'aprova una entrada de temps enviada, l'estat s'actualitzarà a **Aprovada**.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-163">When a submitted time entry is approved, the status is updated to **Approved**.</span></span> <span data-ttu-id="0b4b7-164">Si es rebutja una entrada de temps, l'estat s'actualitzarà a **Retornada** i l'entrada estarà disponible per a la correcció i el reenviament.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-164">If a time entry is rejected, the status is updated to **Returned**, and the entry becomes available for correction and resubmission.</span></span> <span data-ttu-id="0b4b7-165">Només es poden suprimir les entrades de temps que tenen un estat **Esborrany**.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-165">Only time entries that have a status of **Draft** can be deleted.</span></span>

## <a name="view-rejection-comments"></a><span data-ttu-id="0b4b7-166">Veure comentaris sobre el rebuig</span><span class="sxs-lookup"><span data-stu-id="0b4b7-166">View rejection comments</span></span>
<span data-ttu-id="0b4b7-167">Quan una entrada de temps és rebutjada per un aprovador, l'aprovador podria afegir comentaris de rebuig per ajudar el recurs a comprendre la raó del rebuig.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-167">When a time entry is rejected by an approver, the approver might add rejection comments to help the resource understand the reason for the rejection.</span></span> <span data-ttu-id="0b4b7-168">Per visualitzar els comentaris de rebuig d'una entrada de temps, seleccioneu **Obre l'entrada**.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-168">To view the rejection comments for a time entry, select **Open entry**.</span></span> <span data-ttu-id="0b4b7-169">Els comentaris de rebuig es mostraran a la cronologia.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-169">The rejection comments will be shown in the timeline.</span></span> <span data-ttu-id="0b4b7-170">A la cronologia, el recurs pot respondre als comentaris de rebuig abans de retornar l'entrada.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-170">In the timeline, the resource can respond to the rejection comments before he or she resubmits the entry.</span></span>

## <a name="copy-week"></a><span data-ttu-id="0b4b7-171">Copia la setmana</span><span class="sxs-lookup"><span data-stu-id="0b4b7-171">Copy week</span></span>
<span data-ttu-id="0b4b7-172">Després de crear algunes d'entrades de temps, els usuaris poden seleccionar **Copia la setmana** crear entrades de temps addicionals massivament.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-172">After a few time entries have been created, users can select **Copy Week** to bulk-create additional time entries.</span></span> <span data-ttu-id="0b4b7-173">Apareix el quadre de diàleg **Copia**.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-173">The **Copy** dialog box appears.</span></span> <span data-ttu-id="0b4b7-174">A la secció **Del període**, utilitzeu els camps **Data d'inici** i **Data de finalització** per definir l'interval de dates des d'on copiar entrades de temps.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-174">In the **From period** section, use the **Start Date** and **End Date** fields to define the date range to copy time entries from.</span></span> <span data-ttu-id="0b4b7-175">A la secció **Al període**, al camp **Data d'inici**, especifiqueu la data on crear les entrades de temps.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-175">In the **To Period** section, in the **Start Date** field, specify the date to create time entries for.</span></span> <span data-ttu-id="0b4b7-176">A continuació, seleccioneu **Copia**.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-176">Then select **Copy**.</span></span> <span data-ttu-id="0b4b7-177">Per a la data especificada al període d'inici, es crea una còpia de les entrades de temps del corresponent dia de la setmana al període de destinació.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-177">For the specified date in the "to" period, a copy of the time entries for the corresponding day of the week in the "from" period is created.</span></span> <span data-ttu-id="0b4b7-178">Per exemple, l'entrada de temps del dilluns de la setmana passada es copia al dilluns de la setmana especificada al període de destinació.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-178">For example, Monday's time entry from last week is copied into Monday of the week that is specified as the "to" period.</span></span>

## <a name="import"></a><span data-ttu-id="0b4b7-179">Importar</span><span class="sxs-lookup"><span data-stu-id="0b4b7-179">Import</span></span>
<span data-ttu-id="0b4b7-180">El mateix procés bàsic s'utilitza per importar a partir de reserves, assignacions i intercanvis.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-180">The same basic process is used to import from bookings, assignments, and exchanges.</span></span> <span data-ttu-id="0b4b7-181">Els usuaris poden especificar l'interval de dates des d'on s'importen les reserves s'importen.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-181">Users can specify the date range that bookings are imported from.</span></span> <span data-ttu-id="0b4b7-182">Han de seleccionar explícitament les reserves que s' han de copiar en entrades de temps en esborrany.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-182">They must then explicitly select the bookings that should be copied into draft time entries.</span></span> <span data-ttu-id="0b4b7-183">A la versió anterior, les entrades de temps suggerides apareixien a la quadrícula i al calendari, i es perdien quan s'actualitzava la sessió.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-183">In the previous release, suggested time entries appeared in the grid and the calendar, and were lost when the session was refreshed.</span></span>

## <a name="extensibility"></a><span data-ttu-id="0b4b7-184">Capacitat d'ampliació</span><span class="sxs-lookup"><span data-stu-id="0b4b7-184">Extensibility</span></span>
### <a name="add-custom-fields-that-have-lookups-to-other-entities"></a><span data-ttu-id="0b4b7-185">Afegir camps personalitzats que tenen cerques a altres entitats</span><span class="sxs-lookup"><span data-stu-id="0b4b7-185">Add custom fields that have lookups to other entities</span></span>
<span data-ttu-id="0b4b7-186">Hi ha tres passos principals per afegir un camp personalitzat a la quadrícula d'entrada de temps setmanal.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-186">There are three main steps to adding a custom field to the weekly time entry grid.</span></span>

1.  <span data-ttu-id="0b4b7-187">Afegiu el camp personalitzat al quadre de diàleg de creació ràpida.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-187">Add the custom field to the quick create dialog box.</span></span>
2.  <span data-ttu-id="0b4b7-188">Configureu la quadrícula per mostrar el camp personalitzat.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-188">Configure the grid to show the custom field.</span></span>
3.  <span data-ttu-id="0b4b7-189">Afegiu el camp personalitzat al flux de la tasca d'edició de la fila o el flux de la tasca d'edició de la cel·la, segons convingui.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-189">Add the custom field to either the row edit task flow or the cell edit task flow, as appropriate.</span></span>

<span data-ttu-id="0b4b7-190">També heu d'assegurar-vos que el camp nou tingui les validacions necessàries al flux de la tasca d'edició de la fila o de la cel·la.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-190">You must also make sure that the new field has the required validations in the row or cell edit task flow.</span></span> <span data-ttu-id="0b4b7-191">Com a part d'aquest pas, heu de blocar el camp, segons l'estat de l'entrada de temps.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-191">As part of this step, you must lock the field, based on the time entry status.</span></span>

#### <a name="add-the-custom-field-to-the-quick-create-dialog-box"></a><span data-ttu-id="0b4b7-192">Afegir el camp personalitzat al quadre de diàleg de creació ràpida</span><span class="sxs-lookup"><span data-stu-id="0b4b7-192">Add the custom field to the quick create dialog box</span></span>
<span data-ttu-id="0b4b7-193">Heu d'afegir el camp personalitzat al quadre de diàleg Creació ràpida d'entrada de temps.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-193">You must add the custom field to the Create Time Entry Quick Create dialog box.</span></span> <span data-ttu-id="0b4b7-194">per tal que els usuaris puguin introduir un valor en afegir entrades de temps mitjançant el botó **Crea**.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-194">so that users can enter a value for it when they add time entries by using the **New** button.</span></span>

#### <a name="configure-the-grid-to-show-the-custom-field"></a><span data-ttu-id="0b4b7-195">Configurar la quadrícula per mostrar el camp personalitzat</span><span class="sxs-lookup"><span data-stu-id="0b4b7-195">Configure the grid to show the custom field</span></span>
<span data-ttu-id="0b4b7-196">Hi ha dues maneres d'afegir un camp personalitzat a la quadrícula d'entrada de temps setmanal.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-196">There are two ways add a custom field to the weekly time entry grid.</span></span> <span data-ttu-id="0b4b7-197">La primera opció és personalitzar la visualització **Les meves entrades de temps setmanal** i afegir-hi el camp personalitzat.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-197">The first option is to customize the **My Weekly Time Entries** view and add the custom field to it.</span></span> <span data-ttu-id="0b4b7-198">Podeu triar la posició i la mida del camp personalitzat a la quadrícula editant aquestes propietats a la visualització.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-198">You can choose the position and size of the custom field in the grid by editing those properties in the view.</span></span>

<span data-ttu-id="0b4b7-199">La segona opció és crear una nova visualització d'entrada de temps personalitzat i definir-la com a visualització per defecte.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-199">The second option is to create a new custom time entry view and set it as the default view.</span></span> <span data-ttu-id="0b4b7-200">Aquesta visualització hauria de contenir els camps **Descripció** i **Comentaris externs**, a més de les columnes que voleu tenir a la quadrícula.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-200">This view should contain the **Description** and **External Comments** fields, in addition to the columns that you want to have in the grid.</span></span> <span data-ttu-id="0b4b7-201">Podeu triar la posició, la mida i l'ordre per defecte de la quadrícula editant aquestes propietats a la visualització.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-201">You can choose the position, size, and default sort order of the grid by editing those properties in the view.</span></span> <span data-ttu-id="0b4b7-202">A continuació, configureu el control personalitzat per a aquesta visualització per tal que sigui un control **Quadrícula d'entrada de temps**.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-202">Next, configure the custom control for this view so that it's a **Time Entry Grid** control.</span></span> <span data-ttu-id="0b4b7-203">Afegiu aquest control a la visualització i seleccioneu-lo per a la web, telèfons i tauletes.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-203">Add this control to the view, and select it for web, phone, and tablet.</span></span> <span data-ttu-id="0b4b7-204">A continuació, configureu els paràmetres per a la quadrícula d'entrada de temps setmanal.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-204">Next, configure the parameters for the weekly time entry grid.</span></span> <span data-ttu-id="0b4b7-205">Definiu el camp **Data d'Inici** a **msdyn_date**, definiu el camp **Duració** a **msdyn_duration** i definiu el camp **Estat** a **msdyn_entrystatus**.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-205">Set the **Start Date** field to **msdyn_date**, set the **Duration** field to **msdyn_duration**, and set the **Status** field to **msdyn_entrystatus**.</span></span> <span data-ttu-id="0b4b7-206">Per a la visualització per defecte , el camp **Llista d'estat de només lectura** es defineix com a **192350002,192350003,192350004**, el camp **Flux de la tasca d'edició de files** es defineix com a **msdyn_timeentryrowedit**, i el camp **Flux de la tasca d'edició de cel·les** es defineix com a **msdyn_timeentryedit**.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-206">For the default view, the **Read-only Status List** field is set to **192350002,192350003,192350004**, the **Row Edit Task Flow** field is set to **msdyn_timeentryrowedit**, and the **Cell Edit Task Flow** field is set to **msdyn_timeentryedit**.</span></span> <span data-ttu-id="0b4b7-207">Podeu personalitzar aquests camps per afegir o suprimir l'estat de només de lectura o per utilitzar una altra experiència basada en tasques (TBX) per a la fila o l'edició de la cel·la.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-207">You can customize these fields to add or remove read-only status, or to use a different task-based experience (TBX) for row or cell editing.</span></span> <span data-ttu-id="0b4b7-208">Aquests camps han d'estar lligats a un valor estàtic.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-208">These fields should be bound to a static value.</span></span>

#### <a name="add-the-custom-field-to-the-appropriate-edit-task-flow"></a><span data-ttu-id="0b4b7-209">Afegir el camp personalitzat al flux de la tasca d'edició adient</span><span class="sxs-lookup"><span data-stu-id="0b4b7-209">Add the custom field to the appropriate edit task flow</span></span>
<span data-ttu-id="0b4b7-210">Les pàgines de TBX que s'utilitzen per a l'edició es poden trobar a **Processos**.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-210">The TBX pages that are used for editing can be found under **Processes**.</span></span> <span data-ttu-id="0b4b7-211">Les pàgines per defecte són **Project Service - Edició de files d'entrades de temps** i **Project Service - Edició d'entrada de temps**.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-211">The default pages are **Project Service - Time Entry Row Edit** and **Project Service - Time Entry Edit**.</span></span> <span data-ttu-id="0b4b7-212">Podeu editar aquestes pàgines per defecte o crear-ne de noves personalitzades per a les pàgines de TBX.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-212">You can either edit these default pages or create new custom TBX pages.</span></span>

> [!NOTE] 
> <span data-ttu-id="0b4b7-213">Ambdues opcions retiraran alguns filtres de fàbrica de les entitats **Projecte** i **Tasca de projecte**, de manera que es veuran totes les visualitzacions de cerca per a les entitats.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-213">Both options will remove some out-of-box filtering on **Project** and **Project Task** entities, so that all lookup views for the entities will be visible.</span></span> <span data-ttu-id="0b4b7-214">De fàbrica, només es veuen les visualitzacions de cerca rellevants.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-214">Out of the box, only the relevant lookup views are visible.</span></span>

<span data-ttu-id="0b4b7-215">Heu de determinar el flux de la tasca adient per al camp personalitzat.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-215">You must determine the appropriate task flow for the custom field.</span></span> <span data-ttu-id="0b4b7-216">El més probable és que, si heu afegit el camp a la quadrícula, hauria d'anar al flux de la tasca d'edició de files que s'utilitza per als camps que s'apliquen a tota la fila d'entrades de temps.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-216">Most likely, if you added the field to the grid, it should go in the row edit task flow that is used for fields that apply to the whole row of time entries.</span></span> <span data-ttu-id="0b4b7-217">Si el camp personalitzat té un valor únic cada dia, com ara un camp personalitzat per a l'**Hora d'acabament**, hauria d'anar al flux de la tasca d'edició de cel·les.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-217">If the custom field has a unique value every day, such as a custom field for **End time**, it should go in the cell edit task flow.</span></span>

<span data-ttu-id="0b4b7-218">Per afegir el camp personalitzat a un flux de la tasca, arrossegueu un element **Camp** a la posició adient de la pàgina i, a continuació, definiu les seves propietats.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-218">To add the custom field to a task flow, drag a **Field** element into the appropriate position on the page, and then set its properties.</span></span> <span data-ttu-id="0b4b7-219">Definiu la propietat **Origen** a **Entrada de temps** i definiu la propietat **Camp de dades** al camp personalitzat.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-219">Set the **Source** property to **Time Entry**, and set the **Data Field** property to the custom field.</span></span> <span data-ttu-id="0b4b7-220">La propietat **Camp** especifica el nom de visualització a la pàgina de TBX.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-220">The **Field** property specifies the display name on the TBX page.</span></span> <span data-ttu-id="0b4b7-221">Seleccioneu **Aplica** per desar els canvis al camp.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-221">Select **Apply** to save your changes to the field.</span></span> <span data-ttu-id="0b4b7-222">A continuació, seleccioneu **Actualitza** per desar els canvis a la pàgina.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-222">Then select **Update** to save your changes to the page.</span></span>

<span data-ttu-id="0b4b7-223">Per utilitzar una nova pàgina personalitzada de TBX en el seu lloc, creeu un procés nou.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-223">To use a new custom TBX page instead, create a new process.</span></span> <span data-ttu-id="0b4b7-224">Definiu la categoria a **Flux del procés de negoci**, definiu l'entitat a **Entrada d'hora** i definiu el tipus de procés de negoci a **Executa el procés com a flux de la tasca**.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-224">Set the category to **Business Process Flow**, set the entity to **Time Entry**, and set the business process type to **Run process as a task flow**.</span></span> <span data-ttu-id="0b4b7-225">A **Propietats**, la propietat **Nom de la pàgina** s'ha de definir al nom de visualització de la pàgina.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-225">Under **Properties**, the **Page name** property should be set to the display name for the page.</span></span> <span data-ttu-id="0b4b7-226">Afegiu tots els camps corresponents a la pàgina de TBX.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-226">Add all the relevant fields to the TBX page.</span></span> <span data-ttu-id="0b4b7-227">Deseu i activeu el procés i, a continuació, actualitzeu la propietat del control personalitzat del flux de la tasca rellevant al valor **Nom** del procés.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-227">Save and activate the process, and then update the custom control property for the relevant task flow to the value of **Name** on the process.</span></span>

### <a name="add-new-option-set-values"></a><span data-ttu-id="0b4b7-228">Afegir nous valors de conjunts d'opcions</span><span class="sxs-lookup"><span data-stu-id="0b4b7-228">Add new option set values</span></span>
<span data-ttu-id="0b4b7-229">Per afegir valors de conjunt d'opcions a un camp de fàbrica, obriu la pàgina d'edició del camp i, a continuació, a **Tipus**, seleccioneu **Edita** al costat del conjunt d'opcions.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-229">To add option set values to an out-of-box field, open the editing page for the field, and then, under **Type**, select **Edit** next to the option set.</span></span> <span data-ttu-id="0b4b7-230">A continuació, afegiu una opció nova que tingui una etiqueta i un color personalitzats.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-230">Next, add a new option that has a custom label and color.</span></span> <span data-ttu-id="0b4b7-231">Si voleu afegir un nou estat de l'entrada de temps, el camp de fàbrica es diu **Estat de l'entrada**, no **Estat**.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-231">If you want to add a new time entry status, the out-of-box field is named **Entry Status**, not **Status**.</span></span>

### <a name="designate-a-new-time-entry-status-as-read-only"></a><span data-ttu-id="0b4b7-232">Designar un nou estat d'entrada de temps com a només de lectura</span><span class="sxs-lookup"><span data-stu-id="0b4b7-232">Designate a new time entry status as read-only</span></span>
<span data-ttu-id="0b4b7-233">Per designar un nou estat d'entrada de temps com a només de lectura, afegiu el nou valor d'entrada de temps (el número, no l'etiqueta) a la propietat **Llista d'estat de només de lectura**.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-233">To designate a new time entry status as read-only, add the new time entry value (the number, not the label) to the **Read-only Status List** property.</span></span> <span data-ttu-id="0b4b7-234">La part editable de la quadrícula d'entrada de temps es bloquejarà per a les files que tenen l'estat nou.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-234">The editable part of the time entry grid will be locked for rows that have the new status.</span></span>
<span data-ttu-id="0b4b7-235">A continuació, afegiu regles de negoci per blocar tots els camps de les pàgines de TBX **Edició de les files d'entrades de temps** i **Edició d'entrades de temps**.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-235">Next, add business rules to lock all the fields on the **Time Entry Row Edit** and **Time Entry Edit** TBX pages.</span></span> <span data-ttu-id="0b4b7-236">Podeu accedir a les regles de negoci d'aquestes pàgines obrint l'editor del flux del procés de negoci de la pàgina i,a continuació, seleccionant **Regles de negoci**.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-236">You can access the business rules for these pages by opening the business process flow editor for the page and then selecting **Business Rules**.</span></span> <span data-ttu-id="0b4b7-237">Podeu afegir l'estat nou a la condició en les regles de negocis existents o bé afegir una regla de negocis nova per a l'estat nou.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-237">You can add the new status to the condition in the existing business rules, or you can add a new business rule for the new status.</span></span>

### <a name="add-custom-validation-rules"></a><span data-ttu-id="0b4b7-238">Afegir regles de validació personalitzades</span><span class="sxs-lookup"><span data-stu-id="0b4b7-238">Add custom validation rules</span></span>
<span data-ttu-id="0b4b7-239">Hi ha dos tipus de regles de validació que podeu afegir per a l'experiència de la quadrícula d'entrada de temps setmanal: •   Regles de negocis del client que funcionen en quadres de diàleg de creació ràpida i pàgines de TBX •   Validacions de connector del costat del servidor que s'apliquen a totes les actualitzacions d'entrades de temps</span><span class="sxs-lookup"><span data-stu-id="0b4b7-239">There are two types of validation rules that you can add for the weekly time entry grid experience: •   Client-side business rules that work in quick create dialog boxes and on TBX pages •   Server-side plug-in validations that apply to all time entry updates</span></span>

#### <a name="business-rules"></a><span data-ttu-id="0b4b7-240">Regles de negocis</span><span class="sxs-lookup"><span data-stu-id="0b4b7-240">Business rules</span></span>
<span data-ttu-id="0b4b7-241">Utilitzeu regles de negoci per bloquejar i desbloquejar camps, introduir valors per defecte als camps i definir validacions que requereixin informació del registre d'entrada de temps actual.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-241">Use business rules to lock and unlock fields, enter default values in fields, and define validations that require information only from the current time entry record.</span></span> <span data-ttu-id="0b4b7-242">Podeu accedir a les regles de negoci d'una pàgina de TBX obrint l'editor del flux del procés de negoci de la pàgina i, a continuació, seleccionant **Regles de negoci**.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-242">You can access the business rules for a TBX page by opening the business process flow editor for the page and then selecting **Business Rules**.</span></span> <span data-ttu-id="0b4b7-243">A continuació, podeu editar les regles de negocis existents o afegir una regla de negocis nova.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-243">You can then edit the existing business rules or add a new business rule.</span></span> <span data-ttu-id="0b4b7-244">Per a validacions encara més personalitzades, podeu fer que una regla de negocis executi JavaScript.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-244">For even more customized validations, you can use a business rule to run JavaScript.</span></span>

#### <a name="plug-in-validations"></a><span data-ttu-id="0b4b7-245">Validacions de complement</span><span class="sxs-lookup"><span data-stu-id="0b4b7-245">Plug-in validations</span></span>
<span data-ttu-id="0b4b7-246">Heu d'utilitzar validacions de complements per a totes les validacions que requereixin un context més ampli que el disponible en un registre de temps únic o per a totes les validacions que voleu executar en actualitzacions en línia a la quadrícula.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-246">You should use plug-in validations for any validations that require more context than is available in a single time entry record, or for any validations that you want to run on inline updates in the grid.</span></span> <span data-ttu-id="0b4b7-247">Per completar la validació, creeu un complement personalitzat a l'entitat **Entrada de temps**.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-247">To complete the validation, create a custom plug-in on the **Time Entry** entity.</span></span>

> [!IMPORTANT] 
> <span data-ttu-id="0b4b7-248">Actualment, un problema conegut a les pàgines de TBX impedeix que els usuaris puguin corregir la informació i tornar a seleccionar Fet quan una actualització falla una validació de complements.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-248">Currently, a known issue on the TBX pages prevents users from correcting information and reselecting Done when an update fails a plug-in validation.</span></span> <span data-ttu-id="0b4b7-249">Com a solució alternativa, configureu les validacions de regles de negocis per evitar aquesta situació en la mesura del possible.</span><span class="sxs-lookup"><span data-stu-id="0b4b7-249">As a workaround, set up business rule validations to prevent this situation as much as possible.</span></span>


[!INCLUDE[footer-include](../includes/footer-banner.md)]